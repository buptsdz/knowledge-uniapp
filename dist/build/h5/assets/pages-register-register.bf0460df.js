import{p as e,o as s,d as t,w as o,i as a,a as n,k as l,b as i,q as u,t as d,e as c,I as r,f as p}from"./index-22c48793.js";import{_ as h,a as f}from"./pin-visualable.e9af77ee.js";import{_ as m,a as g,b as _}from"./apple-logo-raw.a5aa7133.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";const y=w({data:()=>({user:{username:"",password:"",vercode:"",phonenum:""},phoneIstrue:0,sendcode:{isButtonDisabled:!1,countdown:0}}),methods:{registOnSubmit(){const s={username:this.user.username,password:this.user.password,code:this.user.vercode,phone:this.user.phonenum};s.username&&s.password&&s.code&&s.phone&&(this.isPhone(this.user.phonenum),0!=this.phoneIstrue?this.$service.post("/user-service/api/auth/register",s).then((s=>{1==s.data.isSuccess?(e({title:"注册成功",icon:"success",duration:2e3}),this.$router.push("../basefunction/basefunction")):e({title:"注册失败: "+s.data.message,icon:"none",duration:2200})})).catch((s=>{e({title:"请求错误"+response.data.message,icon:"none",duration:2e3}),console.error("注册请求失败:",s)})):e({title:"请输入正确的手机号！",icon:"error",position:"top"}))},isPhone(e){11==e.length?/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/.test(e)?(this.phoneIstrue=1,console.log("电话号码输入正确！")):(this.phoneIstrue=0,console.log("电话号码输入错误！")):(console.log("电话号码输入错误！"),this.phoneIstrue=0)},async getVercode(){try{if(this.isPhone(this.user.phonenum),0==this.phoneIstrue)return void e({title:"请输入正确的手机号！",icon:"error",position:"top"});1==(await this.$service.post("/user-service/api/auth/sms",{phone:this.user.phonenum})).data.isSuccess?(this.startCountdown(),e({title:"验证码已发送",icon:"success",duration:2e3})):e({title:"发送失败,请重试",icon:"none",duration:2e3})}catch(s){console.log(s),e({title:"请求出错",icon:"none",duration:2e3})}},startCountdown(){this.sendcode.isButtonDisabled=!0,this.sendcode.countdown=60;const e=setInterval((()=>{this.sendcode.countdown--,0===this.sendcode.countdown&&(clearInterval(e),this.sendcode.isButtonDisabled=!1)}),1e3)}}},[["render",function(e,w,y,b,x,v){const V=a,I=c,C=r,j=p;return s(),t(V,{class:"page"},{default:o((()=>[n(V,{class:"up-section"},{default:o((()=>[n(V,{class:"up-section-text"},{default:o((()=>[n(V,{class:"up-section-text-big"},{default:o((()=>[l("p",{class:"big-p"},"您好！"),l("p",{class:"big-p"},"欢迎来到儒升")])),_:1}),n(V,{class:"up-section-text-small"},{default:o((()=>[i(" 第一代数字化知识交互学习软件(鸿蒙版) ")])),_:1})])),_:1}),n(V,{class:"logo-section"},{default:o((()=>[n(I,{style:{height:"48vw"},src:h,alt:"",mode:"aspectFit"})])),_:1})])),_:1}),n(V,{class:"down-section"},{default:o((()=>[n(V,{class:"input-section"},{default:o((()=>[n(V,{class:"user-name"},{default:o((()=>[n(V,{style:{"font-size":"20px","font-weight":"600"}},{default:o((()=>[i(" 用户名 ")])),_:1}),n(V,{class:"uni-input1"},{default:o((()=>[n(C,{style:{"margin-left":"7%"},focus:"",placeholder:"请输入您的用户名",modelValue:x.user.username,"onUpdate:modelValue":w[0]||(w[0]=e=>x.user.username=e)},null,8,["modelValue"])])),_:1})])),_:1}),n(V,{class:"pass-word"},{default:o((()=>[n(V,{style:{"margin-top":"15px","font-size":"20px","font-weight":"600"}},{default:o((()=>[i(" 密码 ")])),_:1}),n(V,{class:"uni-input2"},{default:o((()=>[n(C,{type:"safe-password",style:{"margin-left":"7%"},placeholder:"请输入您的密码",modelValue:x.user.password,"onUpdate:modelValue":w[1]||(w[1]=e=>x.user.password=e)},null,8,["modelValue"]),n(V,{style:{"flex-grow":"1",display:"flex","justify-content":"flex-end"}},{default:o((()=>[n(I,{style:{height:"18px",width:"18px",right:"20%"},src:f,mode:"aspectFit"})])),_:1})])),_:1})])),_:1}),n(V,{class:"phone-num"},{default:o((()=>[n(V,{style:{"margin-top":"15px","font-size":"20px","font-weight":"600"}},{default:o((()=>[i(" 验证码 ")])),_:1}),n(V,{class:"uni-input3"},{default:o((()=>[n(C,{type:"tel",style:{"margin-left":"7%"},placeholder:"请输入您的手机号",modelValue:x.user.phonenum,"onUpdate:modelValue":w[2]||(w[2]=e=>x.user.phonenum=e)},null,8,["modelValue"]),n(V,{class:"get-verification-code"},{default:o((()=>[n(j,{class:u(["get-verification-code-button",{"button-disabled":x.sendcode.isButtonDisabled}]),onClick:v.getVercode,disabled:x.sendcode.isButtonDisabled},{default:o((()=>[i(d(x.sendcode.countdown?`${x.sendcode.countdown}`:"获取验证码"),1)])),_:1},8,["class","onClick","disabled"])])),_:1})])),_:1})])),_:1}),n(V,{class:"verification-ensure"},{default:o((()=>[n(V,{class:"uni-input4"},{default:o((()=>[n(C,{style:{"margin-left":"7%"},placeholder:"请输入验证码",modelValue:x.user.vercode,"onUpdate:modelValue":w[3]||(w[3]=e=>x.user.vercode=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),n(V,{class:"button-section"},{default:o((()=>[n(V,{class:"sign-up"},{default:o((()=>[n(j,{class:"bt-sign-up",onClick:v.registOnSubmit},{default:o((()=>[i("注册")])),_:1},8,["onClick"])])),_:1})])),_:1}),n(V,{class:"otherway-sign-up"},{default:o((()=>[n(V,{class:"other-way"},{default:o((()=>[n(V,{class:"other-way-img"},{default:o((()=>[n(I,{style:{height:"25px",width:"25px"},src:m,mode:"aspectFit"})])),_:1}),n(V,{class:"other-way-img"},{default:o((()=>[n(I,{style:{height:"24px",width:"24px"},src:g,mode:"aspectFit"})])),_:1}),n(V,{class:"other-way-img"},{default:o((()=>[n(I,{style:{height:"22px",width:"22px","margin-top":"-5px"},src:_,mode:"aspectFit"})])),_:1})])),_:1}),n(V,{class:"split-line"},{default:o((()=>[i(" — 其他注册方式 — ")])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-9897e7a9"]]);export{y as default};
